<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"等线 Light";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@等线 Light";}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
h1
	{mso-style-link:"标题 1 字符";
	margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:16.5pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:240%;
	page-break-after:avoid;
	font-size:22.0pt;
	font-family:"Times New Roman",serif;}
h2
	{mso-style-link:"标题 2 字符";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"等线 Light";}
h3
	{mso-style-link:"标题 3 字符";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Times New Roman",serif;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"页眉 字符";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	layout-grid-mode:char;
	border:none;
	padding:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman",serif;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"页脚 字符";
	margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Times New Roman",serif;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
span.1
	{mso-style-name:"标题 1 字符";
	mso-style-link:"标题 1";
	font-family:"Times New Roman",serif;
	font-weight:bold;}
span.2
	{mso-style-name:"标题 2 字符";
	mso-style-link:"标题 2";
	font-family:"等线 Light";
	font-weight:bold;}
span.3
	{mso-style-name:"标题 3 字符";
	mso-style-link:"标题 3";
	font-family:"Times New Roman",serif;
	font-weight:bold;}
span.a
	{mso-style-name:"页眉 字符";
	mso-style-link:页眉;
	font-family:"Times New Roman",serif;}
span.a0
	{mso-style-name:"页脚 字符";
	mso-style-link:页脚;
	font-family:"Times New Roman",serif;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	layout-grid:16.3pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=ZH-CN style='text-justify-trim:punctuation'>

<div class=WordSection1 style='layout-grid:16.3pt'>

<h1><a name="OLE_LINK1"><span lang=EN-US>Hibernate</span></a><span
style='font-family:宋体'>技术栈</span></h1>

<p class=MsoNormal><span lang=EN-US>Hibernate</span><span style='font-family:
宋体'>是一个开源的轻量级框架，所谓轻量级即不需要依赖其他。</span></p>

<p class=MsoNormal><span lang=EN-US>JavaEE</span><span style='font-family:宋体'>的三层架构</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Web</span><span style='font-family:宋体'>层，</span><span
lang=EN-US>struts2</span><span style='font-family:宋体'>框架；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Service</span><span style='font-family:宋体'>层</span><span
lang=EN-US>,Spring</span><span style='font-family:宋体'>框架；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>dao</span><span style='font-family:宋体'>（</span><span
lang=EN-US>data access object</span><span style='font-family:宋体'>）层</span><span
lang=EN-US>,Hibernate</span><span style='font-family:宋体'>框架，对数据库进行</span><span
lang=EN-US>crud</span><span style='font-family:宋体'>操作；</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:21.0pt;text-indent:-21.0pt'><a name="OLE_LINK2"><span
lang=EN-US>三、<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>Hibernate</span>入门</a></h2>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:21.25pt;text-indent:-21.25pt;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:21.25pt;text-indent:-21.25pt;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:21.25pt;text-indent:-21.25pt;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>3.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体'>搭建</span><span lang=EN-US>hibernate</span><span
style='font-family:宋体'>环境</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>创建项目，</span><span lang=EN-US>java</span><span
style='font-family:宋体'>项目和</span><span lang=EN-US>web</span><span
style='font-family:宋体'>项目都可以；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>导入</span><span lang=EN-US>jar</span><span
style='font-family:宋体'>包，</span><span lang=EN-US>lib</span><span
style='font-family:宋体'>文件夹里面的</span><span lang=EN-US>required</span><span
style='font-family:宋体'>文件夹，</span><span lang=EN-US>jpa</span><span
style='font-family:宋体'>文件夹（规范）和其他的日志</span><span lang=EN-US>jar</span><span
style='font-family:宋体'>包，这个日志</span><span lang=EN-US>jar</span><span
style='font-family:宋体'>包并不是</span><span lang=EN-US>Hibernate</span><span
style='font-family:宋体'>本身的，是外面的</span><span lang=EN-US>,</span><span
style='font-family:宋体'>包括</span><span lang=EN-US>log4j-1.2.16</span><span
style='font-family:宋体'>、</span><span lang=EN-US>slf4j-api-1.6.1</span><span
style='font-family:宋体'>和</span><span lang=EN-US>slf4j-log4j12-1.6.1</span><span
style='font-family:宋体'>。导入</span><span lang=EN-US>java</span><span
style='font-family:宋体'>的规范是先在项目下建一个文件夹，在右键选中</span><span lang=EN-US>build path,</span><span
style='font-family:宋体'>笔者经过多次的尝试，发现使用该方法导入</span><span lang=EN-US>jar</span><span
style='font-family:宋体'>包时，只能导入到</span><span lang=EN-US>referance library</span><span
style='font-family:宋体'>里面，程序运行时改文件夹下的</span><span lang=EN-US>jar</span><span
style='font-family:宋体'>包不能被自动加载。所以改规范不可行，最好的办法还是直接放在</span><span lang=EN-US>WEB-INF</span><span
style='font-family:宋体'>文件夹下咋</span><span lang=EN-US>ilb</span><span
style='font-family:宋体'>文件夹里面，程序自动把</span><span lang=EN-US>jar</span><span
style='font-family:宋体'>包放在</span><span lang=EN-US>Web App Libraries</span><span
style='font-family:宋体'>文件夹里面，在运行是实现自动加载。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>3.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体'>创建实体类</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>要求有一个属性是唯一的，比如</span><span
lang=EN-US>ID</span><span style='font-family:宋体'>；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>要有</span><span lang=EN-US>get</span><span
style='font-family:宋体'>和</span><span lang=EN-US>set</span><span
style='font-family:宋体'>的方法；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>使用</span><span lang=EN-US>hibernate</span><span
style='font-family:宋体'>时不需要手动建表，其可以自动帮我们创建；</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>3.3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体'>配置实体类和数据库表的映射关系</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>创建</span><span lang=EN-US>xml</span><span
style='font-family:宋体'>格式的配置文件，虽然配置文件的名称和位置没有固定要求，但是建议把</span><span lang=EN-US>xml</span><span
style='font-family:宋体'>文件放在实体类的包里面，名称和实体类的名称</span><span lang=EN-US>+“.hbm.xml”</span><span
style='font-family:宋体'>；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>配置时首先引入</span><span lang=EN-US>xml</span><span
style='font-family:宋体'>约束（如</span><span lang=EN-US>dtd/schema</span><span
style='font-family:宋体'>）</span><span lang=EN-US>,</span><span style='font-family:
宋体'>其实在下载包</span><span lang=EN-US>\project\hibernate-core\out\production\resources\org\hibernate</span><span
style='font-family:宋体'>里面的</span><span lang=EN-US>hibernate-mapping.dtd</span><span
style='font-family:宋体'>有的：</span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span lang=EN-US>&lt;!DOCTYPE
hibernate-mapping PUBLIC </span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>配置映射关系，注意属性</span><span lang=EN-US>name</span><span
style='font-family:宋体'>的值要和实体类中的属性名称要一致</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;
&lt;hibernate-mapping&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&lt;class name=&quot;com.lvhongbin.bean.User&quot; table=&quot;t_User&quot;&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
&lt;id name=&quot;id&quot; column=&quot;id&quot;&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
&lt;/id&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
&lt;property name=&quot;name&quot; column=&quot;name&quot;&gt;&lt;/property&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
&lt;property name=&quot;password&quot;
column=&quot;password&quot;&gt;&lt;/property&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
&lt;property name=&quot;email&quot;
column=&quot;email&quot;&gt;&lt;/property&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
&lt;property name=&quot;sex&quot; column=&quot;sex&quot;&gt;&lt;/property&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
&lt;property name=&quot;date&quot; column=&quot;date&quot;&gt;&lt;/property&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&lt;/class&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;
&lt;/hibernate-mapping&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>3.4<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体'>创建</span><span lang=EN-US>Hibernate</span><span
style='font-family:宋体'>中的核心配置文件</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>核心配置文件的格式为</span><span lang=EN-US>.xml</span><span
style='font-family:宋体'>，但是核心配置文件的名称和位置是固定的。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>位置：必须在</span><span lang=EN-US>src</span><span
style='font-family:宋体'>下面</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>名称：必须为</span><span lang=EN-US>hibernate.cfg.xml</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>配置时首先引入</span><span lang=EN-US>xml</span><span
style='font-family:宋体'>约束（如</span><span lang=EN-US>dtd/schema</span><span
style='font-family:宋体'>）</span><span lang=EN-US>,</span><span style='font-family:
宋体'>其实在下载包</span><span lang=EN-US>\project\hibernate-core\out\production\resources\org\hibernate</span><span
style='font-family:宋体'>里面的</span><span lang=EN-US>hibernate-configuration-3.0.dtd</span><span
style='font-family:宋体'>有的：</span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span lang=EN-US>&lt;!DOCTYPE
hibernate-configuration PUBLIC</span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span lang=EN-US>&nbsp; &quot;-//Hibernate/Hibernate
Configuration DTD 3.0//EN&quot;</span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span lang=EN-US>&nbsp; &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>hibernate</span><span style='font-family:宋体'>在操作过程中，只会加载核心的配置文件，其他的配置文件不会进行加载。</span></p>

<p class=MsoListParagraph style='margin-left:42.0pt;text-indent:-21.0pt'><span
lang=EN-US>a)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>配置数据库信息（可以参考</span><span lang=EN-US>property</span><span
style='font-family:宋体'>文件</span><span lang=EN-US>project\etc\hibernate.properties</span><span
style='font-family:宋体'>）</span><span lang=EN-US>,</span><span style='font-family:
宋体'>必须要有；</span></p>

<p class=MsoListParagraph style='margin-left:42.0pt;text-indent:-21.0pt'><span
lang=EN-US>b)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>配置</span><span lang=EN-US>hibernate</span><span
style='font-family:宋体'>信息，可以不写；</span></p>

<p class=MsoListParagraph style='margin-left:42.0pt;text-indent:-21.0pt'><span
lang=EN-US>c)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>引入映射文件，具体的代码如下：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&lt;hibernate-configuration&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;session-factory&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--
</span><span style='font-family:宋体'>数据库驱动</span><span lang=EN-US> --&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property
name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--
</span><span style='font-family:宋体'>数据库连接的</span><span lang=EN-US>URL </span><span
style='font-family:宋体'>数据库需要手动创建</span><span lang=EN-US> --&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property
name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/jsp_db?useSSL=true&lt;/property&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--
</span><span style='font-family:宋体'>数据库连接用户名</span><span lang=EN-US> --&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property
name=&quot;connection.username&quot;&gt;root&lt;/property&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--
</span><span style='font-family:宋体'>数据库连接密码</span><span lang=EN-US> --&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property
name=&quot;connection.password&quot;&gt;12345687&lt;/property&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--
Hibernate</span><span style='font-family:宋体'>方言</span><span lang=EN-US>&nbsp; </span><span
style='font-family:宋体'>旧版的方言为</span><span lang=EN-US>org.hibernate.dialect.MySQLDialect--&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property
name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/property&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--
</span><span style='font-family:宋体'>打印</span><span lang=EN-US>SQL</span><span
style='font-family:宋体'>语句</span><span lang=EN-US> --&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property
name=&quot;show_sql&quot;&gt;true&lt;/property&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--
</span><span style='font-family:宋体'>设置自动建表</span><span lang=EN-US> --&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property
name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--
</span><span style='font-family:宋体'>映射文件</span><span lang=EN-US>&nbsp; --&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;mapping
resource=&quot;com/lvhongbin/bean/User.hbm.xml&quot;/&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/session-factory&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&lt;/hibernate-configuration&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>3.5<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体'>实现添加的功能</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>加载</span><span lang=EN-US>hibernate</span><span
style='font-family:宋体'>核心配置文件；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>创建</span><span lang=EN-US>SessionFactory</span><span
style='font-family:宋体'>对象；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>使用</span><span lang=EN-US>SessionFactory</span><span
style='font-family:宋体'>创建</span><span lang=EN-US>session</span><span
style='font-family:宋体'>对象；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>4)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>开启事务；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>5)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>写具体的逻辑</span><span lang=EN-US>crud</span><span
style='font-family:宋体'>操作；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>6)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>提交事务；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>7)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>关闭资源；</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>代码如下：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public
void Test() {</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Configuration
cfg=new Configuration();</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cfg.configure();</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SessionFactory
sessionFactory=cfg.buildSessionFactory();</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Session
session=sessionFactory.openSession();</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Transaction
tx=session.beginTransaction();</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; User
user=new User();</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user.setName(&quot;lvhongbin&quot;);</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user.setPassword(&quot;12345687&quot;);</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user.setSex(&quot;male&quot;);</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; session.save(user);</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tx.commit();</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; session.close();</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sessionFactory.close();</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<h2 style='margin-left:21.0pt;text-indent:-21.0pt'><span lang=EN-US>四、<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>Hibernate</span>入门注意事项</h2>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:21.25pt;text-indent:-21.25pt;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>4.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>Hibernate</span><span style='font-family:宋体'>配置文件详解</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>映射文件的名称和位置没有固定，一般放在对应实体类的包里面；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>映射中的</span><span lang=EN-US>name</span><span
style='font-family:宋体'>属性的值要与对应实体类的属性相同，</span><span lang=EN-US>column</span><span
style='font-family:宋体'>属性与表中的字段名称相同；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>如果不写</span><span lang=EN-US>column</span><span
style='font-family:宋体'>值，则</span><span lang=EN-US>column</span><span
style='font-family:宋体'>值与</span><span lang=EN-US>name</span><span
style='font-family:宋体'>值一致；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>4)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>property</span><span style='font-family:宋体'>标签中的</span><span
lang=EN-US>type</span><span style='font-family:宋体'>属性，用来设置表字段的类型；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>5)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>核心配置文件的格式为</span><span lang=EN-US>.xml</span><span
style='font-family:宋体'>，但是核心配置文件的名称和位置是固定的：</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>位置：必须在</span><span lang=EN-US>src</span><span
style='font-family:宋体'>下面</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>名称：必须为</span><span lang=EN-US>hibernate.cfg.xml</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>6)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>核心配置文件的数据库部分是必须的，</span><span
lang=EN-US>hibernate</span><span style='font-family:宋体'>部分时</span><span
lang=EN-US>=</span><span style='font-family:宋体'>是可选的，映射文件是必须的；</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>4.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>Hibernate</span><span style='font-family:宋体'>核心</span><span
lang=EN-US>API</span><span style='font-family:宋体'>的说明</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Configuration</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Configuration
cfg = new Configuration(); </span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cfg.configure();&nbsp; //</span><span
style='font-family:宋体'>到</span><span lang=EN-US>src</span><span
style='font-family:宋体'>下面找到名称为</span><span lang=EN-US>hibernate.cfg.xml</span><span
style='font-family:宋体'>的配置文件，官方称</span><span lang=EN-US>“</span><span
style='font-family:宋体'>加载核心配置文件</span><span lang=EN-US>”</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>SessonFactory</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>使用</span><span lang=EN-US>Configuration</span><span
style='font-family:宋体'>对象创建</span><span lang=EN-US>SessonFactory</span><span
style='font-family:宋体'>对象，然后根据核心配置文件进行连接或者创建数据表。如果每次操作都进行连接或者创建，则特别耗资源，所以在</span><span
lang=EN-US>hibernate</span><span style='font-family:宋体'>操作中建议一个项目只创建一个</span><span
lang=EN-US>SessonFactory</span><span style='font-family:宋体'>对象。具体实现：写一个工具类（</span><span
lang=EN-US>util</span><span style='font-family:宋体'>），写静态代码块实现，代码如下：</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>public class
HibernateUtil {</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private
final static Configuration cfg;</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private
final static SessionFactory sessionFactory;</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static
{</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cfg
= new Configuration();</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cfg.configure();</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sessionFactory=cfg.buildSessionFactory();</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public
static SessionFactory getSessionFactory() {</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return
sessionFactory;</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>然后在事务操作中添加代码：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>SessionFactory
sessionFactory=HibernateUtil.getSessionFactory();</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Session</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>类似与</span><span lang=EN-US>jdbc</span><span
style='font-family:宋体'>中的</span><span lang=EN-US>connection</span><span
style='font-family:宋体'>，调用</span><span lang=EN-US>session</span><span
style='font-family:宋体'>里面不同的方法实现</span><span lang=EN-US>crud</span><span
style='font-family:宋体'>操作：添加</span><span lang=EN-US>save</span><span
style='font-family:宋体'>方法，修改</span><span lang=EN-US>update</span><span
style='font-family:宋体'>方法，删除</span><span lang=EN-US>delete</span><span
style='font-family:宋体'>方法和跟据</span><span lang=EN-US>id</span><span
style='font-family:宋体'>查询</span><span lang=EN-US>get</span><span
style='font-family:宋体'>方法。</span><span lang=EN-US>session</span><span
style='font-family:宋体'>对象是单线程（不能共用，只能自己使用，注意进程和线程的区别）对象。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>4)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Transaction</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>事务对象，两个重要操作事务提交和事务回滚，</span><span lang=EN-US>tx.commit();</span><span
style='font-family:宋体'>和</span><span lang=EN-US>tx.rollback();</span><span
style='font-family:宋体'>事务有四个特性：原子性（一个事务操作要不全部成功，要么全部失败），一致性（数据操作前后总量不变），隔离性（多人同时操作不会相互影响）和持久性（数据在数据库提交后生效）。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>4.3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体'>解决配置文件中没有提示的问题</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>可以上网；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>把约束文件引入项目，复制配置文件中的</span><span
lang=EN-US>http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd</span><span
style='font-family:宋体'>，然后点击</span><span lang=EN-US>window -- Prefernce -- XML
-- XML Catalog -- Add </span><span style='font-family:宋体'>在</span><span
lang=EN-US>key</span><span style='font-family:宋体'>中</span><span lang=EN-US>URI</span><span
style='font-family:宋体'>粘贴刚才复制的网址，然后在</span><span lang=EN-US>Location</span><span
style='font-family:宋体'>中寻找相应</span><span lang=EN-US>.dtd</span><span
style='font-family:宋体'>文件的路径；</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>4.4<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体'>实体类（持久化类）的编写规则</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>属性私有</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>私有属性需要有公开的</span><span lang=EN-US>get</span><span
style='font-family:宋体'>和</span><span lang=EN-US>set</span><span
style='font-family:宋体'>方法</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>要求实体类中有一个属性作为唯一值（一般使用</span><span
lang=EN-US>id</span><span style='font-family:宋体'>值）</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>4)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>实体类属性建议不使用基本数据类型，而使用基本数据类型对应的包装。</span><span
lang=EN-US>8</span><span style='font-family:宋体'>个基本数据类型</span><span lang=EN-US>,int</span><span
style='font-family:宋体'>对应的是</span><span lang=EN-US>integer</span><span
style='font-family:宋体'>，</span><span lang=EN-US>char</span><span
style='font-family:宋体'>对应的是</span><span lang=EN-US>Character</span><span
style='font-family:宋体'>，其他的都采用首字母大写，如</span><span lang=EN-US>string</span><span
style='font-family:宋体'>对应的是</span><span lang=EN-US>String</span><span
style='font-family:宋体'>，</span><span lang=EN-US>double</span><span
style='font-family:宋体'>对应的是</span><span lang=EN-US>Doube</span><span
style='font-family:宋体'>，其原因是基本数据类型没有</span><span lang=EN-US>null</span><span
style='font-family:宋体'>的值，而包装类有</span><span lang=EN-US>null</span><span
style='font-family:宋体'>值。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>4.5<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体'>主键生成策略</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><a
name="OLE_LINK3"><span lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>increment&nbsp; </span></a><span
style='font-family:宋体'>每次增加增量为</span><span lang=EN-US>1</span><span
style='font-family:宋体'>；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>identity&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>条件是数据库支持自动增长，如</span><span lang=EN-US>Oracle</span><span
style='font-family:宋体'>就不支持自动增长；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>sequence&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>条件是数据库支持序列，如</span><span lang=EN-US>MySql</span><span
style='font-family:宋体'>不支持序列；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>4)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>nativ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>跟据底层数据库对自动生成表示符的能力来选择</span><span lang=EN-US>identity</span><span
style='font-family:宋体'>，</span><span lang=EN-US>sequence</span><span
style='font-family:宋体'>，</span><span lang=EN-US>hilo</span><span
style='font-family:宋体'>三种生成器中的一种，适合跨数据库平台的开发，适用于代理主键；</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>5)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>uuid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>实<a name="OLE_LINK5"></a><a name="OLE_LINK4">体类</a></span><span
lang=EN-US>id</span><span style='font-family:宋体'>属性类型必须为字符串类型</span> </p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>4.6<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体'>实体类操作</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>save()</span><span style='font-family:宋体'>操作；</span></p>

<p class=MsoNormal><span lang=EN-US>User user =new User();</span></p>

<p class=MsoNormal><span lang=EN-US>user.setName(“lvhongbin”);</span></p>

<p class=MsoNormal><span lang=EN-US>session.copy(user);</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>跟据</span><span lang=EN-US>id</span><span
style='font-family:宋体'>查询</span></p>

<p class=MsoNormal><span lang=EN-US>Session</span><span style='font-family:
宋体'>对象提供了两种对象装载的方法，分别是</span><span lang=EN-US>get()</span><span
style='font-family:宋体'>和</span><span lang=EN-US>load()</span><span
style='font-family:宋体'>。当开发人员不确定数据库是否有匹配的记录存在时，可以使用</span><span lang=EN-US>get()</span><span
style='font-family:宋体'>方法，如果没有匹配的记录存在，返回</span><span lang=EN-US>null</span><span
style='font-family:宋体'>。</span><span lang=EN-US>get()</span><span
style='font-family:宋体'>方法中含有两个参数，第一个是持久化对象，另一个是持久化对象的唯一标识值。其代码如下</span></p>

<p class=MsoNormal><span lang=EN-US>User user =session.get(User.class, 1);</span></p>

<p class=MsoNormal><span lang=EN-US>System.out.println(user);</span></p>

<p class=MsoNormal><span lang=EN-US>load()</span><span style='font-family:宋体'>方法返回对象的代理，只有在返回对象被调用的时候，</span><span
lang=EN-US>Hibernate</span><span style='font-family:宋体'>才会发出</span><span
lang=EN-US>SQL</span><span style='font-family:宋体'>语句去查询对象。这叫</span><span
lang=EN-US>hibernate</span><span style='font-family:宋体'>的延迟加载策略，即使用</span><span
lang=EN-US>load()</span><span style='font-family:宋体'>加载持久化对象时，它返回的是一个未初始化的代理（代理无须从数据库中抓取数据对象的数据）直到调用代理的某个方法时，</span><span
lang=EN-US>hibernate</span><span style='font-family:宋体'>才会访问数据库。当装载的对象长时间没有调用时，就会被垃圾回收器回收，在程序中合理使用延迟加载策略，可以优化系统的性能，节省内存空间，减少不必要的开支。</span></p>

<p class=MsoNormal><span lang=EN-US>// sql</span><span style='font-family:宋体'>语句</span><span
lang=EN-US>&nbsp;&nbsp;&nbsp; SELECT * FROM t_user t WHERE t.uid =1</span></p>

<p class=MsoNormal><span lang=EN-US>User user =session.load(User.class, 1);</span></p>

<p class=MsoNormal><span lang=EN-US>System.out.println(user);</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者在映射文件中的</span><span
lang=EN-US>&lt;property&gt;</span><span style='font-family:宋体'>标签的</span><span
lang=EN-US>lazy</span><span style='font-family:宋体'>属性改为“</span><span
lang=EN-US>true</span><span style='font-family:宋体'>”</span></p>

<p class=MsoNormal><span lang=EN-US>&lt;property lazy=“true”&gt;</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>修改</span></p>

<p class=MsoNormal><span style='font-family:宋体'>跟据</span><span lang=EN-US>id</span><span
style='font-family:宋体'>查询，返回对象</span></p>

<p class=MsoNormal><span lang=EN-US>// UPDATE t-user SET username=?, address=?
WHERE uid=?</span></p>

<p class=MsoNormal><span style='font-family:宋体'>第一种方法</span><span lang=EN-US>(</span><span
style='font-family:宋体'>建议</span><span lang=EN-US>)</span></p>

<p class=MsoNormal><a name="_Hlk500708473"></a><a name="_Hlk500699558"><span
lang=EN-US>User user =session.get(User.class, 1);</span></a></p>

<p class=MsoNormal><span lang=EN-US>user.setName(“lvhongbin”);</span></p>

<p class=MsoNormal><span lang=EN-US>session.update(user);</span></p>

<p class=MsoNormal><span style='font-family:宋体'>第二种方法</span><span lang=EN-US>(</span><span
style='font-family:宋体'>不建议</span><span lang=EN-US>,</span><span
style='font-family:宋体'>因为他会影响到别的参数，如果别的参数不修改的话会变成空值</span><span lang=EN-US>)</span></p>

<p class=MsoNormal><span lang=EN-US>User user =new User();</span></p>

<p class=MsoNormal><span lang=EN-US>user.setName(“lvhongbin”);</span></p>

<p class=MsoNormal><span lang=EN-US>session.update (user);</span></p>

<p class=MsoNormal><span style='font-family:宋体'>第三种方法</span><span lang=EN-US> </span><span
style='font-family:宋体'>强制刷新提交。</span><span lang=EN-US>session</span><span
style='font-family:宋体'>的刷出（</span><span lang=EN-US>flush</span><span
style='font-family:宋体'>）过程是指</span><span lang=EN-US>Session</span><span
style='font-family:宋体'>执行的一些必须的</span><span lang=EN-US>SQL</span><span
style='font-family:宋体'>语句来把内存中的对象状态同步到</span><span lang=EN-US>JDBC</span><span
style='font-family:宋体'>中，刷出会在某些查询之前执行，在事物提交时执行，或者在程序中直接调用</span><span
lang=EN-US>flush</span><span style='font-family:宋体'>（）时执行。</span></p>

<p class=MsoNormal><span lang=EN-US>User user =new User();</span></p>

<p class=MsoNormal><span lang=EN-US>user.setName(“lvhongbin”);</span></p>

<p class=MsoNormal><span lang=EN-US>session.flush();</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>4)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>删除</span></p>

<p class=MsoNormal><span style='font-family:宋体'>只有当对象在持久化状态时才能执行，所以在删除数据之前，首先将对象的状态转化为持久化状态。</span></p>

<p class=MsoNormal><span lang=EN-US>//DELETE FROM t_user WHERE uid=?</span></p>

<p class=MsoNormal><span style='font-family:宋体'>第一种方法</span><span lang=EN-US>(</span><span
style='font-family:宋体'>建议</span><span lang=EN-US>)</span></p>

<p class=MsoNormal><span lang=EN-US>User user =session.get(User.class, 1);</span></p>

<p class=MsoNormal><span lang=EN-US>session.delete(user);</span></p>

<p class=MsoNormal><span style='font-family:宋体'>第二种方法</span></p>

<p class=MsoNormal><span lang=EN-US>User user = new User();</span></p>

<p class=MsoNormal><span lang=EN-US>User.setUid(3);</span></p>

<p class=MsoNormal><span lang=EN-US>session.delete(user);</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>5)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>saveOrUpdate()</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:0cm'><span
style='font-family:宋体'>当实体类对象为瞬时态时作</span><span lang=EN-US>save()</span><span
style='font-family:宋体'>的操作，当实体类对象为托管态或者持久态时作</span><span lang=EN-US>update()</span><span
style='font-family:宋体'>的操作；</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:21.25pt;text-indent:-21.25pt;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:21.25pt;text-indent:-21.25pt;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:21.25pt;text-indent:-21.25pt;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:21.25pt;text-indent:-21.25pt;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:49.6pt;text-indent:-1.0cm;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>4.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:49.6pt;text-indent:-1.0cm;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>4.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:49.6pt;text-indent:-1.0cm;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>4.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:49.6pt;text-indent:-1.0cm;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>4.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:49.6pt;text-indent:-1.0cm;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>4.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<p class=MsoListParagraph style='margin-top:13.0pt;margin-right:0cm;margin-bottom:
13.0pt;margin-left:49.6pt;text-indent:-1.0cm;line-height:173%;page-break-after:
avoid;display:none'><b><span lang=EN-US style='font-size:16.0pt;line-height:
173%;display:none'>4.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span lang=EN-US style='font-size:16.0pt;line-height:173%;
display:none'>&nbsp;</span></b></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>4.7<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体'>实体类对象的状态</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>瞬时态：对象里面没有</span><span lang=EN-US>id</span><span
style='font-family:宋体'>值，对象与</span><span lang=EN-US>session</span><span
style='font-family:宋体'>没有关联。只是通过</span><span lang=EN-US>new</span><span
style='font-family:宋体'>关键字开辟内存空间创建</span><span lang=EN-US>Java</span><span
style='font-family:宋体'>对象，或者通过删除操作删除数据库表某一对象时，没有纳入</span><span lang=EN-US>session</span><span
style='font-family:宋体'>的管理里面，如</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>User user =new
User();</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:0cm'><span
lang=EN-US>user.setName(“lvhongbin”);</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:0cm'><span
style='font-family:宋体'>或者：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>User user
=session.get(User.class, 1);</span></p>

<p class=MsoNormal style='margin-left:24.0pt'><span lang=EN-US>session.delete(user);</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>持久态：在对象里面有</span><span lang=EN-US>id</span><span
style='font-family:宋体'>值，它总和会话状态（</span><span lang=EN-US>session</span><span
style='font-family:宋体'>）和事务（</span><span lang=EN-US>transaction</span><span
style='font-family:宋体'>）关联在一起。当持久化对象发生改动时并不会立即执行数据库操作，只有当事务结束时，才会更新数据库，以便保证</span><span
lang=EN-US>Hibernate</span><span style='font-family:宋体'>的持久化对象和数据库操作的同步性，如插入，查询和更新的操作：</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:0cm'><span
lang=EN-US>User user =session.get(User.class, 1);</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>托管状态：对象里面有</span><span lang=EN-US>id</span><span
style='font-family:宋体'>值，对象与</span><span lang=EN-US>session</span><span
style='font-family:宋体'>没有关联，</span><span lang=EN-US>close(),clear(), evict()</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:0cm'><span
lang=EN-US>User user =new User();</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:0cm'><span
lang=EN-US>user.setUid(3);</span></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>4.8<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>Hibernate</span><span style='font-family:宋体'>的一级缓存</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>数据存到数据库里面，数据库本身是文件系统，使用流方式操作文件本身效率并不高，把数据存到内存里面，不需要使用流的方式，可以直接读取内存里面的数据，提高读取效率。</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Hibernate</span><span style='font-family:宋体'>框架中有很多优化的手段，其中缓存是其中一个手段，</span><span
lang=EN-US>Hibernate</span><span style='font-family:宋体'>有一级缓存和二级缓存，一级缓存是默认打开的，属于</span><span
lang=EN-US>session</span><span style='font-family:宋体'>级缓存，所以它的生命周期与</span><span
lang=EN-US>session</span><span style='font-family:宋体'>相同，随</span><span
lang=EN-US>session</span><span style='font-family:宋体'>创建而创建，随</span><span
lang=EN-US>session</span><span style='font-family:宋体'>销毁而销毁，而且存储数据必须是持久化数据。过程：首先，查询一级缓存发现没数据，才会去查询数据，返回查询对象（持久化对象），然后，把持久化对象的值放到一级缓存中；若查询一级缓存中存在相同的数据，直接返回。</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>一级缓存的更新特性：持久态自动更新数据库（不需要写</span><span
lang=EN-US>update</span><span style='font-family:宋体'>方法）。过程：创建</span><span
lang=EN-US>session</span><span style='font-family:宋体'>对象时，自动创建一级缓存对象和快照区（副本），当持久态对象被创建时，持久态被放到一级缓存及其对应的快照区中</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>User user
=session.get(User.class, 1);</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:0cm'><span
lang=EN-US>user.setName(“lvhongbin”);</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:0cm'><span
lang=EN-US>tx.commit();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:宋体'>修改</span><span lang=EN-US>user</span><span
style='font-family:宋体'>对象里面的值，修改持久态对象的值的同时，修改一级缓存中的内容，但是不会修改对照区中的内容。最后提交事务的时候，比较一级缓存和快照区的内容是否相同，如果不相同，则把一级缓存中的内容更新到数据库里面，如果相同，则不更新。</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>4)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Hibernate</span><span style='font-family:宋体'>的二级缓存，目前已经不用了，替代技术为</span><span
lang=EN-US>redis</span><span style='font-family:宋体'>，默认是不打开的，需要配置，属于</span><span
lang=EN-US>sessionFaction</span><span style='font-family:宋体'>级缓存。</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:0cm'><span
style='font-family:宋体'>验证一级缓存的存在，</span> <span style='font-family:宋体'>跟据</span><span
lang=EN-US>uid=1</span><span style='font-family:宋体'>查询，返回对象；再次根据</span><span
lang=EN-US>uid=1</span><span style='font-family:宋体'>查询，返回对象，通过断点</span><span
lang=EN-US>debug</span><span style='font-family:宋体'>查看。</span></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>4.9<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>Hibernate</span><span style='font-family:宋体'>的事务操作</span></h3>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>不考虑隔离产生的问题：脏读，不可重复读和虚读。</span></p>

<h3 style='margin-left:49.6pt;text-indent:-1.0cm'><span lang=EN-US>4.10<span
style='font:7.0pt "Times New Roman"'> </span></span><span lang=EN-US>Hibernate</span><span
style='font-family:宋体'>的其他</span><span lang=EN-US>api</span></h3>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>JavaBean,</span><span style='font-family:
宋体'>更正确的叫法为实体类，拥有</span><span lang=EN-US>get</span><span style='font-family:
宋体'>和</span><span lang=EN-US>set</span><span style='font-family:宋体'>的方法；</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

</div>

</body>

</html>
